<!DOCTYPE html>
<html lang="en">
<head th:replace="~{fragments/links :: headContent('')}"></head>
<title>Gráficos - EasyProjects</title>
<style>
  .custom-close {
    width: 12px;
    height: 12px;
    padding: 0;
  }
</style>
<body>
<div th:replace="~{fragments/navbar :: navbar}" class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top"></div>

<div class="container mt-5 pt-5">
  <h2 class="text-center">Exibição de Gráficos e estatísticas</h2>
  <div class="text-center mt-3" id="restoreContainer" style="display: none;">
    <div class="dropdown">
      <button class="btn btn-primary dropdown-toggle" type="button" data-bs-toggle="dropdown">
        Restaurar Gráficos
      </button>
      <ul class="dropdown-menu" id="restoreList"></ul>
    </div>
  </div>

  <div class="row mt-4">
    <div class="col-md-3 mb-4">
      <div class="card">
        <div class="card-header text-center">
          Não atribuídos
        </div>
        <div class="card-body">
          <h1 class="text-center" th:text="${nao_atribuidos}"></h1>
          <span class="text-center text-muted" style="font-size: 0.8rem; display: block;">Projetos nos quais não possuem responsáveis atribuídos.</span>
        </div>
      </div>
    </div>

    <div class="col-md-3 mb-4">
      <div class="card">
        <div class="card-header text-center">
          Em andamento
        </div>
        <div class="card-body">
          <h1 class="text-center" th:text="${em_andamento}"></h1>
          <span class="text-center text-muted" style="font-size: 0.8rem; display: block;">Projetos em andamento.</span>
        </div>
      </div>
    </div>

    <div class="col-md-3 mb-4">
      <div class="card">
        <div class="card-header text-center">
          Em atraso
        </div>
        <div class="card-body">
          <h1 class="text-center" th:text="${em_atraso}"></h1>
          <span class="text-center text-muted" style="font-size: 0.8rem; display: block;">Projetos que passaram da data de previsão de finalização.</span>
        </div>
      </div>
    </div>

    <div class="col-md-3 mb-4">
      <div class="card">
        <div class="card-header text-center">
          Concluído
        </div>
        <div class="card-body">
          <h1 class="text-center" th:text="${concluidos}"></h1>
          <span class="text-center text-muted" style="font-size: 0.8rem; display: block;">Projetos finalizados.</span>
        </div>
      </div>
    </div>
  </div>
  <hr>

  <div id="mensagemSemProjetos" class="text-center mt-4" style="display: none;">
    <p class="text-muted">Não existem projetos criados.</p>
  </div>


  <div class="row mt-4" id="graficosContainer">
    <div class="col-md-4 mb-4 grafico-card" id="cardProxFinalizacao">
      <div class="card">
        <div class="card-header text-center d-flex justify-content-between align-items-center">
          <span class="flex-grow-1">Projetos próximos da data de previsão de finalização</span>
          <button class="btn-close custom-close" onclick="removerGrafico('cardProxFinalizacao')"></button>
        </div>
        <div class="card-body">
          <canvas id="graficoProxFinalizacao" height="250"></canvas>
        </div>
      </div>
    </div>

    <div class="col-md-4 mb-4 grafico-card" id="cardStatus">
      <div class="card">
        <div class="card-header text-center d-flex justify-content-between align-items-center">
          <span class="flex-grow-1">Projetos por status</span>
          <button class="btn-close custom-close" onclick="removerGrafico('cardStatus')"></button>
        </div>
        <div class="card-body">
          <canvas id="graficoStatus" height="250"></canvas>
        </div>
      </div>
    </div>

    <div class="col-md-4 mb-4 grafico-card" id="cardPrioridade">
      <div class="card">
        <div class="card-header text-center d-flex justify-content-between align-items-center">
          <span class="flex-grow-1">Projetos por prioridade</span>
          <button class="btn-close custom-close" onclick="removerGrafico('cardPrioridade')"></button>
        </div>
        <div class="card-body">
          <canvas id="graficoPrioridade" height="250"></canvas>
        </div>
      </div>
    </div>

    <div class="col-md-4 mb-4 grafico-card" id="cardSubtarefas">
      <div class="card">
        <div class="card-header text-center d-flex justify-content-between align-items-center">
          <span class="flex-grow-1">Subtarefas por responsáveis</span>
          <button class="btn-close custom-close" onclick="removerGrafico('cardSubtarefas')"></button>
        </div>
        <div class="card-body">
          <canvas id="graficoSubtarefas" height="250"></canvas>
        </div>
      </div>
    </div>
  </div>

</div>
<div th:replace="~{fragments/scripts :: scriptsContent('/assets/js/graficos.js')}"></div>
</body>
</html>
